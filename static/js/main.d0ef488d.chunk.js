(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{229:function(e,t,a){e.exports=a(557)},234:function(e,t,a){},251:function(e,t,a){},324:function(e,t){},326:function(e,t){},339:function(e,t){},387:function(e,t){},389:function(e,t){},557:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"playerProfileUpdated",function(){return C}),a.d(r,"chatMessageReceived",function(){return P}),a.d(r,"selfPeerInfo",function(){return x}),a.d(r,"gameInvitationRecieved",function(){return I}),a.d(r,"gameInvitationAccepted",function(){return A});var n,o=a(0),i=a.n(o),c=a(34),s=a.n(c),l=(a(234),a(13)),u=a(16),p=a(18),d=a(17),h=a(19),m=a(80),f=a(206),b=a(15),v=a(43),y=a(136),O=a(36),g=a(81),j=a(208),E=a.n(j),w=a(209),k=a(210),_=a(559),C=Object(_.a)("go/PLAYER_PROFILE_UPDATED",function(e){return{peerId:e.peerId,playerName:e.playerName,playerEmoji:e.playerEmoji}}),P=Object(_.a)("go/CHAT_MESSAGE_RECEIVED",function(e){return{from:e.from,content:e.content,timestamp:e.timestamp}}),x=Object(_.a)("go/SELF_PEER_INFO",function(e){return{peerInfo:e.peerInfo}}),I=Object(_.a)("go/GAME_INVITATION_RECEIVED",function(e){return{from:e.from}}),A=Object(_.a)("go/GAME_INVITATION_ACCEPTED",function(e){return{nonce:e.nonce,players:e.players}}),T=a(27),N=a(227),S=a(558),M=Object(S.a)((n={},Object(T.a)(n,x,function(e,t){var a=t.payload;return Object(b.a)({},e,a)}),Object(T.a)(n,P,function(e,t){var a=t.payload;return Object(b.a)({},e,{messages:Object(N.a)(e.messages).concat([a])})}),Object(T.a)(n,C,function(e,t){var a=t.payload;return Object(b.a)({},e,{players:Object(b.a)({},e.players,Object(T.a)({},a.peerId,Object(b.a)({},a)))})}),Object(T.a)(n,A,function(e,t){var a=t.payload;return Object(b.a)({},e,{game:Object(b.a)({},a)})}),Object(T.a)(n,I,function(e,t){var a=t.payload;return Object(b.a)({},e,{invitation:Object(b.a)({},a)})}),n),{version:0,players:{},invitation:{},game:{},messages:[]}),R=a(104),L=Object(m.connect)(function(e){return{go:e.go,router:e.router}},Object(b.a)({},r)),B=a(3),D=a.n(B),W=a(12),Y=Object(R.b)({navigateTo:function(){return function(){var e=Object(W.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.path,J.push(a);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},sendMessage:function(){return function(){var e=Object(W.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.room,r=t.payload,n=JSON.stringify({action:"chat:message:sent",payload:r}),e.next=4,a.broadcast(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},updatePlayerProfile:function(){return function(){var e=Object(W.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.room,r=t.payload,n=JSON.stringify({action:"lobby:player:profileUpdated",payload:r}),e.next=4,a.broadcast(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},saveDTO:function(){return function(){var e=Object(W.a)(D.a.mark(function e(t){var a,r,n,o,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.db,r=t.room,n=t.dto,o=t.opponent,e.next=3,a.put(Object(b.a)({_id:"dto:latest"},n));case 3:return i=JSON.stringify({action:"game:dto:saved",payload:{dto:n}}),e.next=6,r.sendTo(o,i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},deleteDTO:function(){return function(){var e=Object(W.a)(D.a.mark(function e(t){var a,r,n,o,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.db,r=t.room,n=t.dto,o=t.opponent,e.next=3,a.del("dto:latest");case 3:return i=JSON.stringify({action:"game:dto:deleted",payload:{dto:n}}),e.next=6,r.sendTo(o,i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},sendGameInvite:function(e){e.gameInvitationAccepted;return function(){var e=Object(W.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.room,r=t.payload,n=JSON.stringify({action:"game:invite",payload:r}),a.sendTo(r.to,n);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},acceptGameInvite:function(e){var t=e.gameInvitationAccepted;return function(){var e=Object(W.a)(D.a.mark(function e(a){var r,n,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.room,n=a.payload,o=JSON.stringify({action:"game:invite:accepted",payload:n}),r.sendTo(n.players[1],o),t(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}),G={actions:r,reducer:M,container:Object(R.a)(L,Y)},J=Object(O.a)(),z={go:G.reducer,router:Object(g.connectRouter)(J)},U=a(131),K=a(106),H=(a(251),function(e){var t={key:"root",blacklist:["go"],storage:E.a},a=Object(v.createStore)(Object(y.a)(t,Object(v.combineReducers)(Object(b.a)({},z,e))),Object(w.composeWithDevTools)(Object(v.applyMiddleware)(k.a,Object(g.routerMiddleware)(J))));return{store:a,persistor:Object(y.b)(a),history:J}}()),F=H.store,V=H.persistor,q=H.history,X=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(m.Provider,{store:F},i.a.createElement(f.PersistGate,{persistor:V},i.a.createElement(g.ConnectedRouter,{history:q},i.a.createElement(U.a,null,i.a.createElement(K.a,{exact:!0,path:"/",render:function(){return i.a.createElement(ee,null)}}),i.a.createElement(K.a,{exact:!0,path:"/lobby",render:function(){return i.a.createElement(Ce,null)}}),i.a.createElement(K.a,{path:"/game",render:function(){return i.a.createElement(ge,null)}}),i.a.createElement(K.a,{render:function(){return i.a.createElement("div",null,"Miss")}})))))}}]),t}(o.Component),$=a(35),Q=a.n($),Z=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"LandingPage"},i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))},"New Game"))}}]),t}(o.Component),ee=G.container(Z),te=a(226),ae=a(46),re=a.n(ae),ne=a(67),oe=a.n(ne),ie=new window.Ipfs({repo:"/orbitdb/go",EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star"]}}}),ce=function(){return window.ipfs?Promise.resolve(window.ipfs):new Promise(function(e,t){ie.on("ready",Object(W.a)(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.ipfs=ie,e(ie);case 2:case"end":return t.stop()}},t,this)})))})},se=a(318),le=function(){var e=Object(W.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.orbitdb){e.next=2;break}return e.abrupt("return",Promise.resolve(window.orbitdb));case 2:return e.next=4,ce();case 4:return t=e.sent,void 0,a=new se(t,"./orbitdb",void 0),window.orbitdb||(window.orbitdb=a),e.abrupt("return",Promise.resolve(window.orbitdb));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ue=a(48),pe=a.n(ue),de=[],he=[],me=function e(t){var a=this,r=t.size,n=t.board,o=t.last_move_passed,i=t.in_atari,c=t.attempted_suicide,s=t.history,u=t.captures,p=t.capturesArrayBlack,d=t.capturesArrayWhite,h=t.moveCount,m=t.moveCountArray,f=t.last_move_undo,v=t.current_color;Object(l.a)(this,e),this.getDataTransferObject=function(){return Object(b.a)({},JSON.parse(JSON.stringify(a)))},this.create_board=function(t){for(var a=[],r=0;r<t;r++){a[r]=[];for(var n=0;n<t;n++)a[r][n]=e.EMPTY}return a},this.reset=function(){this.current_color=e.BLACK,this.board=this.create_board(this.size),this.last_move_passed=!1,this.in_atari=!1,this.attempted_suicide=!1,this.history=[],this.captures=[],this.moveCount=0,this.moveCountArray=[],this.last_move_undo=!1},this.switch_player=function(){this.current_color=this.current_color===e.BLACK?e.WHITE:e.BLACK},this.pass=function(){this.last_move_passed&&this.end_game(),this.last_move_passed=!0,this.switch_player()},this.undo=function(){if(this.history.length){var e=this.history.pop(),t=e.board,a=e.current_color;this.board=t,this.current_color=a}},this.end_game=function(){},this.is_valid_state=function(e){for(var t=JSON.stringify(this.board),a=0;this.moveCountArray[this.moveCountArray.length-1]>this.moveCountArray[this.moveCountArray.length-2]&&this.moveCount>0&&a<e.length;a+=1)if(JSON.stringify(e[a].board)===t)return!1;return!0},this.play=function(t,a){if(de.push(t),he.push(a),this.moveCount++,this.moveCountArray.push(this.moveCount),this.attempted_suicide=this.in_atari=!1,de[de.length-1]===de[de.length-2]&&he[he.length-1]===he[he.length-2])return this.moveCount--,!1;if(this.board[t][a]!==e.EMPTY)return!1;var r=this.board[t][a]=this.current_color,n=[],o=this.get_adjacent_intersections(t,a),i=!1,c=this;pe.a.each(o,function(t){var a=c.board[t[0]][t[1]];if(a!==e.EMPTY&&a!==r){var o=c.get_group(t[0],t[1]);0===o.liberties?n.push(o):1===o.liberties&&(i=!0)}});var s=0,l=0;if(pe.a.isEmpty(n)&&0===this.get_group(t,a).liberties)return this.board[t][a]=e.EMPTY,this.attempted_suicide=!0,!1;pe.a.each(n,function(t){pe.a.each(t.stones,function(t){c.board[t[0]][t[1]]=e.EMPTY,1===r?s++:2===r&&l++})}),this.capturesArrayBlack.push(s),this.capturesArrayWhite.push(l),i&&(this.in_atari=!0),this.last_move_passed=!1,this.switch_player();var u={current_color:this.current_color,board:pe.a.cloneDeep(c.board)};return this.history.push(u),!0},this.get_adjacent_intersections=function(e,t){var a=[];return e>0&&a.push([e-1,t]),t<this.size-1&&a.push([e,t+1]),e<this.size-1&&a.push([e+1,t]),t>0&&a.push([e,t-1]),a},this.get_group=function(t,a){var r=this.board[t][a];if(r===e.EMPTY)return null;for(var n={},o=[],i=[[t,a]],c=0,s=function(t){var a=p.board[t[0]][t[1]];a===e.EMPTY&&c++,a===r&&i.push([t[0],t[1]])};i.length>0;){var l=i.pop();if(!n[l]){var u=this.get_adjacent_intersections(l[0],l[1]),p=this;pe.a.each(u,s),n[l]=!0,o.push(l)}}return{liberties:c,stones:o}},r&&(this.size=r,this.board=this.create_board(r)),n&&(this.size=n[0].length,this.board=n),this.current_color=v||e.BLACK,this.last_move_passed=o||!1,this.in_atari=i||!1,this.attempted_suicide=c||!1,this.history=s||[],this.captures=u||[],this.capturesArrayBlack=p||[],this.capturesArrayWhite=d||[],this.moveCount=h||0,this.moveCountArray=m||[],this.last_move_undo=f||!1};me.EMPTY=0,me.BLACK=1,me.WHITE=2;var fe=me,be=a(181),ve=function(e){return"black"===e?1:2},ye=function(e,t,a){return e&&e[t]?e[t][a]:""},Oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={ready:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(W.a)(D.a.mark(function e(){var t,a,r,n,o,i,c,s,l,u,p,d,h,m=this;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.router,r=t.selfPeerInfo,n=t.playerProfileUpdated,o=a.location.pathname,i=o.replace("/game",""),c=i.split("/")[3],e.next=6,le();case 6:return s=e.sent,e.next=9,s._ipfs.id();case 9:return l=e.sent,r({peerInfo:l}),u=be(s._ipfs,c),this.orbitdb=s,this.room=u,this.peerId=l.id,e.next=17,s.open(i);case 17:return this.db=e.sent,e.next=20,this.db.load();case 20:return e.next=22,this.db.get("dto:latest")[0];case 22:if(void 0!==(p=e.sent)){e.next=30;break}return this.board=new fe({size:5}),d=this.board.getDataTransferObject(),e.next=28,this.db.put(Object(b.a)({_id:"dto:latest",name:"dto:latest"},d));case 28:e.next=31;break;case 30:this.board=new fe(p);case 31:u.on("peer joined",function(){var e=Object(W.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),u.on("peer left",function(e){}),u.on("subscribed",function(){}),u.on("message",function(){var e=Object(W.a)(D.a.mark(function e(t){var a,r,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=JSON.parse(t.data),r=a.action,o=a.payload,console.log("message...",t,r,o),"lobby:player:profileUpdated"===r&&n(Object(b.a)({},o)),"game:dto:saved"===r&&(m.board=new fe(o.dto),m.setState({board:m.board})),"game:dto:deleted"===r&&(m.board=new fe(o.dto),m.setState({board:m.board}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),h=setInterval(Object(W.a)(D.a.mark(function e(){var t,a,r,n,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=u.getPeers(),a=Object(te.a)(t,1),(r=a[0])&&(o=[l.id,r].sort(),m.setState({ready:!0,opponent:r,you:l.id,colors:(n={},Object(T.a)(n,o[0],"white"),Object(T.a)(n,o[1],"black"),n)}),clearInterval(h));case 2:case"end":return e.stop()}},e,this)})),1e3);case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.go,r=t.saveDTO,n=t.deleteDTO,o=this.state,c=o.ready,s=o.colors,l=o.you,u=o.opponent;return c?i.a.createElement("div",{className:"GamePage"},i.a.createElement(xt,null,i.a.createElement(re.a,{style:{padding:"16px",marginBottom:"16px"}},i.a.createElement(St,{room:this.room,peerId:this.peerId})),i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r({room:e.room,db:e.db,dto:e.board.getDataTransferObject(),opponent:u});case 1:case"end":return t.stop()}},t,this)}))},"Save Game"),"\xa0",i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(D.a.mark(function t(){var a;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.board=new fe({size:5}),a=e.board.getDataTransferObject(),t.next=4,e.db.put(Object(b.a)({_id:"dto:latest",name:"dto:latest"},a));case 4:e.setState({board:e.board}),n({room:e.room,db:e.db,dto:a,opponent:u});case 6:case"end":return t.stop()}},t,this)}))},"Reset Game"),i.a.createElement("h3",null,"You are ",s[l],","," ",ye(a.players,u,"playerName")," is"," ",s[u]),i.a.createElement("h3",null,"It is "," ",this.board.current_color===ve(s[l])?"your turn":"".concat(ye(a.players,u,"playerName"),"'s turn")),i.a.createElement(xe,{currentPlayer:ve(s[l]),board:this.board,onPlay:function(t){e.board=t,e.setState({board:t}),r({room:e.room,db:e.db,dto:e.board.getDataTransferObject(),opponent:u})}}))):i.a.createElement(oe.a,null)}}]),t}(o.Component),ge=G.container(Oe),je=a(84),Ee=a.n(je),we=a(181),ke=function(e,t,a){return e&&e[t]?e[t][a]:t},_e=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={peers:[]},a.handleChange=function(e){return function(t){a.setState(Object(T.a)({},e,t.target.value))}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(W.a)(D.a.mark(function e(){var t,a,r,n,o,i,c,s,l,u=this;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.selfPeerInfo,r=t.playerProfileUpdated,n=t.gameInvitationRecieved,o=t.navigateTo,e.next=3,ce();case 3:return i=e.sent,e.next=6,le();case 6:return c=e.sent,e.next=9,i.id();case 9:s=e.sent,this.peerInfo=s,a({peerInfo:s}),this.roomName="go.lobby",l=we(i,this.roomName),this.room=l,this.ipfs=i,this.orbitdb=c,l.on("message",function(){var e=Object(W.a)(D.a.mark(function e(t){var a,i,s;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("lobby:player:profileUpdated"===(a=JSON.parse(t.data)).action&&r(Object(b.a)({},a.payload)),"game:invite"===a.action&&n(Object(b.a)({from:t.from},a.payload)),"game:invite:accepted"!==a.action){e.next=9;break}return e.next=6,c.create("go.game.".concat(a.payload.nonce),"docstore",{replicate:!0,overwrite:!0,write:["*"]});case 6:i=e.sent,s=i.address.toString(),o({path:"/game".concat(s)});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),setInterval(Object(W.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.setState({peers:l.getPeers()});case 1:case"end":return e.stop()}},e,this)})),5e3);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.peers,a=this.props,r=a.go,n=a.sendGameInvite,o=r.players,c=this.room&&this.peerInfo.id,s=this.room&&t.length>0;return i.a.createElement("div",{className:"LobbyPage"},i.a.createElement(xt,null,i.a.createElement(Ee.a,{container:!0,spacing:24},i.a.createElement(Ee.a,{item:!0,xs:12},i.a.createElement(re.a,{style:{padding:"16px"}},!c&&i.a.createElement(oe.a,null),c&&i.a.createElement(St,{room:this.room,peerId:this.peerInfo.id}))),i.a.createElement(Ee.a,{item:!0,xs:12,md:6},i.a.createElement(re.a,{style:{padding:"16px"}},!s&&i.a.createElement(oe.a,null),s&&i.a.createElement("div",null,i.a.createElement("h3",null," Ask for a game with: "),t.map(function(t){return i.a.createElement("div",{key:t},i.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:Object(W.a)(D.a.mark(function a(){var r;return D.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r={to:t},n({room:e.room,payload:r});case 2:case"end":return a.stop()}},a,this)}))},ke(o,t,"playerEmoji"),"\xa0"," ",ke(o,t,"playerName")))})))),i.a.createElement(Ee.a,{item:!0,xs:12,md:6},i.a.createElement(re.a,{style:{padding:"16px"}},!s&&i.a.createElement(oe.a,null),s&&i.a.createElement(at,{room:this.room})))),i.a.createElement(ze,{room:this.room,orbitdb:this.orbitdb})))}}]),t}(o.Component),Ce=G.container(_e),Pe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){a.props.currentPlayer===a.props.board.current_color?a.props.board.play(a.props.row,a.props.col)&&a.props.onPlay(a.props.board):console.log("not your turn!!!")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={top:40*this.props.row,left:40*this.props.col,backgroundColor:this.props.color!==fe.EMPTY?this.props.color===fe.BLACK?window._PLAYER_ONE_COLOR:window._PLAYER_TWO_COLOR:void 0,backgroundImage:this.props.color!==fe.EMPTY?this.props.color===fe.BLACK?window._PLAYER_ONE_IMAGE:window._PLAYER_TWO_IMAGE:void 0},t="intersection";return this.props.color!==fe.EMPTY&&(t+=this.props.color===fe.BLACK?" black":" white"),i.a.createElement("div",{onClick:this.handleClick,className:t,style:e})}}]),t}(o.Component),xe=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=this.props.board,t=[],a=0;a<e.size;a++)for(var r=0;r<e.size;r++)t.push(i.a.createElement(Pe,Object.assign({key:"".concat(a,"-").concat(r)},{board:e,color:e.board[a][r],row:a,col:r,currentPlayer:this.props.currentPlayer,onPlay:this.props.onPlay})));var n={width:40*e.size,height:40*e.size};return i.a.createElement("div",{style:n,id:"board"},t)}}]),t}(o.Component),Ie=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(e){a.props.board.pass()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("input",{id:"pass-btn",type:"button",value:"Pass",onClick:this.handleClick})}}]),t}(o.Component),Ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(e){window.location.reload(!1),a.props.board.reset(),a.props.onReset()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("input",{id:"newgame-btn",type:"button",value:"New Game",onClick:this.handleClick})}}]),t}(o.Component),Te=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e="black"===this.props.color?this.props.board.capturesArrayBlack:this.props.board.capturesArrayWhite,t="Captures by ".concat(this.props.color,": ")+e.reduce(function(e,t){return e+t},0);return i.a.createElement("div",{id:"alerts"},"\xa0",t,"\xa0")}}]),t}(o.Component),Ne=(o.Component,a(212)),Se=a.n(Ne),Me=a(216),Re=a.n(Me),Le=a(214),Be=a.n(Le),De=a(215),We=a.n(De),Ye=a(213),Ge=a.n(Ye),Je=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={open:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.go.invitation&&e.go.invitation.from&&!Object.keys(e.go.game).length?this.setState({from:e.go.invitation.from,open:!0}):this.setState({open:!1})}},{key:"render",value:function(){var e,t,a,r=this,n=this.props,o=n.go,c=n.room,s=n.acceptGameInvite,l=n.navigateTo,u=this.state,p=u.from,d=u.open;return i.a.createElement("div",null,i.a.createElement(Se.a,{open:d,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Ge.a,{id:"alert-dialog-title"},"Game Invite"),i.a.createElement(Be.a,null,i.a.createElement(We.a,{id:"alert-dialog-description"},"Invitation from ",(e=o.players,t=p,a="playerName",e&&e[t]?e[t][a]:""),".")),i.a.createElement(Re.a,null,i.a.createElement(Q.a,{onClick:function(){r.setState({open:!1})},color:"primary"},"Reject"),i.a.createElement(Q.a,{onClick:Object(W.a)(D.a.mark(function e(){var t,a,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.random().toString(16),s({room:c,payload:{nonce:t,players:[o.peerInfo.id,o.invitation.from]}}),e.next=4,r.props.orbitdb.create("go.game.".concat(t),"docstore",{replicate:!0,overwrite:!0,write:["*"]});case 4:a=e.sent,n=a.address.toString(),l({path:"/game".concat(n)});case 7:case"end":return e.stop()}},e,this)})),color:"primary",autoFocus:!0},"Accept"))))}}]),t}(i.a.Component),ze=G.container(Je),Ue=a(83),Ke=a.n(Ue),He=a(79),Fe=a.n(He),Ve=a(65),qe=a.n(Ve),Xe=a(82),$e=a.n(Xe),Qe=a(54),Ze=a.n(Qe),et=function(e,t,a){return e&&e[t]?e[t][a]:""},tt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={content:"",messages:[]},a.scrollToBottomOfChat=function(){setTimeout(function(){document.querySelector(".chatContainer")&&(document.querySelector(".chatContainer").scrollTop=document.querySelector(".chatContainer").scrollHeight)},1e3)},a.handleChange=function(e){return function(t){a.setState(Object(T.a)({},e,t.target.value))}},a.sendMessage=function(){a.props.sendMessage({room:a.props.room,payload:{content:a.state.content,timestamp:Math.round((new Date).getTime()/1e3)}}),a.setState({content:""})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.room,a=e.chatMessageReceived;t.on("message",function(){var e=Object(W.a)(D.a.mark(function e(t){var r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"chat:message:sent"===(r=JSON.parse(t.data)).action&&(n=Object(b.a)({},r.payload,{from:t.from}),a(n));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props.go,t=e.messages,a=e.players;return i.a.createElement("div",null,i.a.createElement("h3",null,"Chat"),!t.length&&i.a.createElement("h5",null,"No Messages"),i.a.createElement(Fe.a,{className:"chatContainer",style:{maxHeight:"420px",overflowY:"scroll"}},t.map(function(t){var r=et(a,t.from,"playerEmoji"),n=et(e.players,t.from,"playerName");return i.a.createElement(qe.a,{key:t.timestamp,alignItems:"flex-start"},r,i.a.createElement($e.a,{primary:n,secondary:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ze.a,{component:"span",color:"textPrimary"},t.content))}))}),this.scrollToBottomOfChat()),i.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},i.a.createElement(Ke.a,{label:"Message",fullWidth:!0,value:this.state.content,onChange:this.handleChange("content"),margin:"normal"}),i.a.createElement(Q.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:this.sendMessage},"Send")))}}]),t}(o.Component),at=G.container(tt),rt=a(221),nt=a.n(rt),ot=a(220),it=a.n(ot),ct=a(217),st=a.n(ct),lt=a(135),ut=a.n(lt),pt=a(134),dt=a.n(pt),ht=a(223),mt=a.n(ht),ft=a(218),bt=a.n(ft),vt=a(219),yt=a.n(vt),Ot=a(133),gt=a.n(Ot),jt=a(224),Et=a.n(jt),wt=a(222),kt=a.n(wt),_t=a(102),Ct=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={mobileOpen:!1},a.handleDrawerToggle=function(){a.setState(function(e){return{mobileOpen:!e.mobileOpen}})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme,n=i.a.createElement("div",null,i.a.createElement("div",{className:a.toolbar}),i.a.createElement(st.a,null),i.a.createElement(Fe.a,null,i.a.createElement(qe.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/"})}},i.a.createElement(gt.a,null,i.a.createElement(bt.a,null)),i.a.createElement($e.a,{primary:"Home"})),i.a.createElement(qe.a,{button:!0,onClick:function(){e.props.navigateTo({path:"/lobby"})}},i.a.createElement(gt.a,null,i.a.createElement(yt.a,null)),i.a.createElement($e.a,{primary:"Lobby"}))));return i.a.createElement("div",{className:a.root},i.a.createElement(it.a,null),i.a.createElement(nt.a,{position:"fixed",className:a.appBar},i.a.createElement(kt.a,null,i.a.createElement(mt.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerToggle,className:a.menuButton},i.a.createElement(Et.a,null)),i.a.createElement(Ze.a,{variant:"h6",color:"inherit",noWrap:!0},"G0"))),i.a.createElement("nav",{className:a.drawer},i.a.createElement(dt.a,{smUp:!0,implementation:"css"},i.a.createElement(ut.a,{container:this.props.container,variant:"temporary",anchor:"rtl"===r.direction?"right":"left",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,classes:{paper:a.drawerPaper}},n)),i.a.createElement(dt.a,{xsDown:!0,implementation:"css"},i.a.createElement(ut.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},n))),i.a.createElement("main",{className:a.content},i.a.createElement("div",{className:a.toolbar}),this.props.children))}}]),t}(i.a.Component),Pt=Object(_t.withStyles)(function(e){return{root:{display:"flex"},drawer:Object(T.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(T.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(T.a)({marginRight:20},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:3*e.spacing.unit}}},{withTheme:!0})(Ct),xt=G.container(Pt),It=a(225),At=a.n(It),Tt=[{value:"\ud83d\ude00",label:"\ud83d\ude00"},{value:"\ud83d\ude05",label:"\ud83d\ude05"},{value:"\ud83d\ude07",label:"\ud83d\ude07"},{value:"\ud83e\udd14",label:"\ud83e\udd14"},{value:"\ud83d\ude30",label:"\ud83d\ude30"}],Nt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={playerName:"",playerEmoji:"\ud83d\ude00"},a.handleChange=function(e){return function(t){a.setState(Object(T.a)({},e,t.target.value)),"playerName"!==e&&"playerEmoji"!==e||a.safePlayerProfileUpdate()}},a.sendProfileToPeers=function(){a.props.updatePlayerProfile({room:a.props.room,payload:{peerId:a.props.peerId,playerName:a.state.playerName,playerEmoji:a.state.playerEmoji}})},a.safePlayerProfileUpdate=pe.a.debounce(Object(W.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.sendProfileToPeers();case 1:case"end":return e.stop()}},e,this)})),1e3),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={peerId:this.props.peerId,playerName:this.props.peerId.substring(2,6)+"...",playerEmoji:"\ud83d\ude00"};this.setState(Object(b.a)({},t)),this.safePlayerProfileUpdate(),this.props.room.on("peer joined",function(){var t=Object(W.a)(D.a.mark(function t(a){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Peer joined the room",a),e.sendProfileToPeers();case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),this.props.room.on("subscribed",function(){e.sendProfileToPeers()})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h3",null,"Your Profile"),i.a.createElement(Ke.a,{id:"standard-select-currency",select:!0,label:"Mood",value:this.state.playerEmoji,onChange:this.handleChange("playerEmoji"),margin:"normal"},Tt.map(function(e){return i.a.createElement(At.a,{key:e.value,value:e.value},e.label)})),"\xa0\xa0",i.a.createElement(Ke.a,{label:"Nickname",value:this.state.playerName,onChange:this.handleChange("playerName"),margin:"normal"}))}}]),t}(o.Component),St=G.container(Nt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[229,2,1]]]);
//# sourceMappingURL=main.d0ef488d.chunk.js.map